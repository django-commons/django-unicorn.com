{"parents": [], "prev": {"link": "../partial-updates/", "title": "Partial Updates"}, "next": {"link": "../visibility/", "title": "Visibility"}, "title": "Polling", "meta": {"myst_slugs": {"polling": [1, "polling", "Polling"], "disable-poll": [31, "disable-poll", "Disable poll"], "pollupdate": [85, "pollupdate", "PollUpdate"]}, "wordcount": {"words": 145, "minutes": 1}}, "body": "<section id=\"polling\">\n<h1>Polling<a class=\"headerlink\" href=\"#polling\" title=\"Link to this heading\">\u00b6</a></h1>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn:poll</span></code> can be added to the root <code class=\"docutils literal notranslate\"><span class=\"pre\">div</span></code> element of a component to have it refresh the component automatically every 2 seconds. The polling is smart enough that it won\u2019t poll when the page is inactive.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># polling.py</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django.utils.timezone</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">now</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django_unicorn.components</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">UnicornView</span>\n\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">PollingView</span><span class=\"p\">(</span><span class=\"n\">UnicornView</span><span class=\"p\">):</span>\n    <span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"highlight-html notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cm\">&lt;!-- polling.html --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">unicorn:poll</span><span class=\"p\">&gt;</span>{{ current_time }}<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n<p>A method can also be specified if there is a specific method on the component that should called every time the polling fires. For example, <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn:poll=&quot;get_updates&quot;</span></code> would call the <code class=\"docutils literal notranslate\"><span class=\"pre\">get_updates</span></code> method instead of the built-in <code class=\"docutils literal notranslate\"><span class=\"pre\">refresh</span></code> method.</p>\n<p>To define a different refresh time in milliseconds, a modifier can be added as well. <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn:poll-1000</span></code> would fire the <code class=\"docutils literal notranslate\"><span class=\"pre\">refresh</span></code> method every 1 second, instead of the default 2 seconds.</p>\n<div class=\"highlight-html notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cm\">&lt;!-- polling-every-five-seconds.html --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">unicorn:poll-5000</span><span class=\"o\">=</span><span class=\"s\">&quot;get_updates&quot;</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">input</span> <span class=\"na\">unicorn:model</span><span class=\"o\">=</span><span class=\"s\">&quot;update&quot;</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;text&quot;</span> <span class=\"na\">id</span><span class=\"o\">=</span><span class=\"s\">&quot;text&quot;</span> <span class=\"p\">/&gt;</span>\n  {{ update }}\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n<section id=\"disable-poll\">\n<h2>Disable poll<a class=\"headerlink\" href=\"#disable-poll\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>Polling can dynamically be disabled by checking a boolean field from the component.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># poll_disable.py</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django.utils.timezone</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">now</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django_unicorn.components</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">UnicornView</span>\n\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">PollDisableView</span><span class=\"p\">(</span><span class=\"n\">UnicornView</span><span class=\"p\">):</span>\n    <span class=\"n\">polling_disabled</span> <span class=\"o\">=</span> <span class=\"kc\">False</span>\n    <span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">get_date</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"highlight-html notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cm\">&lt;!-- poll-disable.html --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">unicorn:poll-1000</span><span class=\"o\">=</span><span class=\"s\">&quot;get_date&quot;</span> <span class=\"na\">unicorn:poll</span><span class=\"err\">.</span><span class=\"na\">disable</span><span class=\"o\">=</span><span class=\"s\">&quot;polling_disabled&quot;</span><span class=\"p\">&gt;</span>\n    current_time: {{ current_time|date:&quot;s&quot; }}<span class=\"p\">&lt;</span><span class=\"nt\">br</span> <span class=\"p\">/&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">u:click</span><span class=\"o\">=</span><span class=\"s\">&quot;$toggle(&#39;polling_disabled&#39;)&quot;</span><span class=\"p\">&gt;</span>Toggle Polling<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>The field passed into <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn:poll.disable</span></code> can be negated with an exclamation point.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># poll_disable_negation.py</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django.utils.timezone</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">now</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django_unicorn.components</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">UnicornView</span>\n\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">PollDisableNegationView</span><span class=\"p\">(</span><span class=\"n\">UnicornView</span><span class=\"p\">):</span>\n    <span class=\"n\">polling_enabled</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n    <span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">get_date</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<div class=\"highlight-html notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cm\">&lt;!-- poll-disable-negation.html --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">unicorn:poll-1000</span><span class=\"o\">=</span><span class=\"s\">&quot;get_date&quot;</span> <span class=\"na\">unicorn:poll</span><span class=\"err\">.</span><span class=\"na\">disable</span><span class=\"o\">=</span><span class=\"s\">&quot;!polling_enabled&quot;</span><span class=\"p\">&gt;</span>\n    current_time: {{ current_time|date:&quot;s&quot; }}<span class=\"p\">&lt;</span><span class=\"nt\">br</span> <span class=\"p\">/&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">button</span> <span class=\"na\">u:click</span><span class=\"o\">=</span><span class=\"s\">&quot;$toggle(&#39;polling_enabled&#39;)&quot;</span><span class=\"p\">&gt;</span>Toggle Polling<span class=\"p\">&lt;/</span><span class=\"nt\">button</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n</div>\n</section>\n<section id=\"pollupdate\">\n<h2>PollUpdate<a class=\"headerlink\" href=\"#pollupdate\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>A poll can be dynamically updated by returning a <code class=\"docutils literal notranslate\"><span class=\"pre\">PollUpdate</span></code> object from an action method. The timing and method can be updated, or it can be disabled.</p>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># poll_update.py</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django.utils.timezone</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">now</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">django_unicorn.components</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">PollUpdate</span><span class=\"p\">,</span> <span class=\"n\">UnicornView</span>\n\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">PollingUpdateView</span><span class=\"p\">(</span><span class=\"n\">UnicornView</span><span class=\"p\">):</span>\n    <span class=\"n\">polling_disabled</span> <span class=\"o\">=</span> <span class=\"kc\">False</span>\n    <span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">get_date</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">current_time</span> <span class=\"o\">=</span> <span class=\"n\">now</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"n\">PollUpdate</span><span class=\"p\">(</span><span class=\"n\">timing</span><span class=\"o\">=</span><span class=\"mi\">2000</span><span class=\"p\">,</span> <span class=\"n\">disable</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"n\">method</span><span class=\"o\">=</span><span class=\"s2\">&quot;get_date&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"highlight-html notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cm\">&lt;!-- poll-update.html --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">div</span> <span class=\"na\">unicorn:poll-1000</span><span class=\"o\">=</span><span class=\"s\">&quot;get_date&quot;</span><span class=\"p\">&gt;</span>\n    current_time: {{ current_time|date:&quot;s&quot; }}<span class=\"p\">&lt;</span><span class=\"nt\">br</span> <span class=\"p\">/&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">div</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n</section>\n</section>\n", "metatags": "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["visibility", "Visibility", "N", "next"], ["partial-updates", "Partial Updates", "P", "previous"]], "sourcename": "polling.md.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Polling</a><ul>\n<li><a class=\"reference internal\" href=\"#disable-poll\">Disable poll</a></li>\n<li><a class=\"reference internal\" href=\"#pollupdate\">PollUpdate</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".md", "has_maths_elements": false, "current_page_name": "polling", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "alabaster_version": "1.0.0", "alabaster_version_info": [1, 0, 0], "furo_version": "2025.12.19", "furo_navigation_tree": "<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Basics</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../\">Introduction</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../getting-started/\">Getting Started</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../installation/\">Installation</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../components/\">Components</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Components</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../views/\">Views</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../templates/\">Templates</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../actions/\">Actions</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../child-components/\">Child components</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../django-models/\">Django Models</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Features</span></p>\n<ul class=\"current\">\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../direct-view/\">Direct View</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../validation/\">Forms and Validation</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../redirecting/\">Redirecting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../loading-states/\">Loading States</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../dirty-states/\">Dirty States</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../partial-updates/\">Partial Updates</a></li>\n<li class=\"toctree-l1 current has-children current-page\"><a class=\"current reference internal\" href=\"#\">Polling</a><input aria-label=\"Toggle navigation of Polling\" checked=\"\" class=\"toctree-checkbox\" id=\"toctree-checkbox-1\" name=\"toctree-checkbox-1\" role=\"switch\" type=\"checkbox\"/><label for=\"toctree-checkbox-1\"><span class=\"icon\"><svg><use href=\"#svg-arrow-right\"></use></svg></span></label><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#disable-poll\">Disable poll</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#pollupdate\">PollUpdate</a></li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../visibility/\">Visibility</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../messages/\">Messages</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Advanced</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../javascript/\">JavaScript Integration</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../queue-requests/\">Queue Requests</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../custom-morphers/\">Custom Morphers</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Misc</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../cli/\">CLI</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../settings/\">Settings</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Info</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../faq/\">FAQ</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../changelog/\">Changelog</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../troubleshooting/\">Troubleshooting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../architecture/\">Architecture</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../code-of-conduct/\">Contributor Covenant Code of Conduct</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://www.django-unicorn.com/docs/unicorn-latest.pdf\">PDF docs</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/adamghill/django-unicorn\">Code repo</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/sponsors/adamghill\">Sponsor</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../api/django_unicorn/\">django_unicorn</a></li>\n</ul>\n", "furo_hide_toc": false, "furo_pygments": {"light": {"background": "#f2f2f2", "foreground": "#1e1e1e"}, "dark": {"background": "#202020", "foreground": "#d0d0d0"}}}