{"parents": [], "prev": {"link": "../troubleshooting/", "title": "Troubleshooting"}, "next": {"link": "../code-of-conduct/", "title": "Contributor Covenant Code of Conduct"}, "title": "Architecture", "meta": {"myst_slugs": {"architecture": [1, "architecture", "Architecture"], "template-tags": [5, "template-tags", "Template tags"], "javascript-initialization": [11, "javascript-initialization", "JavaScript initialization"], "models": [17, "models", "Models"], "actions": [23, "actions", "Actions"], "html-diff": [27, "html-diff", "HTML Diff"]}, "wordcount": {"words": 505, "minutes": 3}}, "body": "<section id=\"architecture\">\n<h1>Architecture<a class=\"headerlink\" href=\"#architecture\" title=\"Link to this heading\">\u00b6</a></h1>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">Unicorn</span></code> is made up of multiple pieces which are all integrated tightly together. The following is a summary of how some of it all fits together, although it skips over a lot of the complexity and advanced functionality. However, for all of the details the code is available at <a class=\"reference external\" href=\"https://github.com/adamghill/django-unicorn/\">https://github.com/adamghill/django-unicorn/</a>.</p>\n<section id=\"template-tags\">\n<h2>Template tags<a class=\"headerlink\" href=\"#template-tags\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>Starting with the integration with a normal Django template, there are the <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn_scripts</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn</span></code> template tags. <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn_scripts</span></code> renders out the entire JavaScript library and initializes the global <code class=\"docutils literal notranslate\"><span class=\"pre\">Unicorn</span></code> object. The <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn</span></code> template tag provides the ability to add the component wherever it is needed on the page. Based on the name passed into the <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn</span></code> template tag, conventions are used to find the correct component view and component template (e.g. if \u201chello-world\u201d is passed into the template tag, a class of <code class=\"docutils literal notranslate\"><span class=\"pre\">hello_world.HelloWorldView</span></code> and a template named <code class=\"docutils literal notranslate\"><span class=\"pre\">hello-world.html</span></code> will be searched for).</p>\n<p>Once the component view and template are found, a serialized version of all of the public attributes of the component view is generated into a JSON object for the page, and the template is rendered with a context of those same public attributes.</p>\n</section>\n<section id=\"javascript-initialization\">\n<h2>JavaScript initialization<a class=\"headerlink\" href=\"#javascript-initialization\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>After the template is rendered, the JavaScript library parses the HTML for DOM elements that start with <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn:</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">u:</span></code> and creates a list of attributes that end with <code class=\"docutils literal notranslate\"><span class=\"pre\">:model</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">:poll</span></code>, or other specific <code class=\"docutils literal notranslate\"><span class=\"pre\">Unicorn</span></code> functionality. For attributes that are left, the assumption is that they are an event type (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">unicorn:click</span></code>).</p>\n<p>For anything that is a model, the JavaScript sets the value for the element based on the serialized data of the publicly available attributes from the component view. Event listeners are attached for all event types. Then, other custom functionality is setup (e.g. polling).</p>\n</section>\n<section id=\"models\">\n<h2>Models<a class=\"headerlink\" href=\"#models\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>For all inputs which have a <code class=\"docutils literal notranslate\"><span class=\"pre\">model</span></code> attribute, an event listener is attached (either <code class=\"docutils literal notranslate\"><span class=\"pre\">change</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">blur</span></code> depending on if the <code class=\"docutils literal notranslate\"><span class=\"pre\">lazy</span></code> modifier is used). The <code class=\"docutils literal notranslate\"><span class=\"pre\">defer</span></code> modifier will store the action to be bundled with an action event that might happen later.</p>\n<p>Once a model event is fired it is sent over the wire to the defined AJAX endpoint with a specific JSON structure which tells <code class=\"docutils literal notranslate\"><span class=\"pre\">Unicorn</span></code> what the updated data from the input should be. The component class is re-instantiated and the data is updated from the front-end, then re-rendered and the HTML is returned in the response.</p>\n</section>\n<section id=\"actions\">\n<h2>Actions<a class=\"headerlink\" href=\"#actions\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>Actions follow a similar path as the models above, however there is a different JSON stucture. Also, the method, arguments, and kwargs that are passed from the front-end get parsed with a mix of <code class=\"docutils literal notranslate\"><span class=\"pre\">ast.parse</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">ast.literal_eval</span></code> to convert the strings into the appropriate Python types (i.e. change the string \u201c1\u201d to the integer <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code>). After the component is re-initialized, the method is called with the passed-in arguments and kwargs. Once all of the actions have been called, the component view is re-rendered and the HTML is returned in the response.</p>\n</section>\n<section id=\"html-diff\">\n<h2>HTML Diff<a class=\"headerlink\" href=\"#html-diff\" title=\"Link to this heading\">\u00b6</a></h2>\n<p>After the AJAX endpoint returns its response, the newly rendered DOM is merged into the old DOM and input values are set again based on the new data in the AJAX response. By default, a library called <code class=\"docutils literal notranslate\"><span class=\"pre\">morphdom</span></code> is used to do the diffing and merging of the DOM. However, this can be overridden by setting the <code class=\"docutils literal notranslate\"><span class=\"pre\">MORPHER</span></code> setting to use a different library.</p>\n</section>\n</section>\n", "metatags": "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["code-of-conduct", "Contributor Covenant Code of Conduct", "N", "next"], ["troubleshooting", "Troubleshooting", "P", "previous"]], "sourcename": "architecture.md.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Architecture</a><ul>\n<li><a class=\"reference internal\" href=\"#template-tags\">Template tags</a></li>\n<li><a class=\"reference internal\" href=\"#javascript-initialization\">JavaScript initialization</a></li>\n<li><a class=\"reference internal\" href=\"#models\">Models</a></li>\n<li><a class=\"reference internal\" href=\"#actions\">Actions</a></li>\n<li><a class=\"reference internal\" href=\"#html-diff\">HTML Diff</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".md", "has_maths_elements": false, "current_page_name": "architecture", "sidebars": ["sidebar/brand.html", "sidebar/search.html", "sidebar/scroll-start.html", "sidebar/navigation.html", "sidebar/ethical-ads.html", "sidebar/scroll-end.html", "sidebar/variant-selector.html"], "alabaster_version": "1.0.0", "alabaster_version_info": [1, 0, 0], "furo_version": "2025.12.19", "furo_navigation_tree": "<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Basics</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../\">Introduction</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../getting-started/\">Getting Started</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../installation/\">Installation</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../components/\">Components</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Components</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../views/\">Views</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../templates/\">Templates</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../actions/\">Actions</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../child-components/\">Child components</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../django-models/\">Django Models</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Features</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../direct-view/\">Direct View</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../validation/\">Forms and Validation</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../redirecting/\">Redirecting</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../loading-states/\">Loading States</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../dirty-states/\">Dirty States</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../partial-updates/\">Partial Updates</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../polling/\">Polling</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../visibility/\">Visibility</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../messages/\">Messages</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Advanced</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../javascript/\">JavaScript Integration</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../queue-requests/\">Queue Requests</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../custom-morphers/\">Custom Morphers</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Misc</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../cli/\">CLI</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../settings/\">Settings</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">Info</span></p>\n<ul class=\"current\">\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../faq/\">FAQ</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../changelog/\">Changelog</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../troubleshooting/\">Troubleshooting</a></li>\n<li class=\"toctree-l1 current has-children current-page\"><a class=\"current reference internal\" href=\"#\">Architecture</a><input aria-label=\"Toggle navigation of Architecture\" checked=\"\" class=\"toctree-checkbox\" id=\"toctree-checkbox-1\" name=\"toctree-checkbox-1\" role=\"switch\" type=\"checkbox\"/><label for=\"toctree-checkbox-1\"><span class=\"icon\"><svg><use href=\"#svg-arrow-right\"></use></svg></span></label><ul>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#template-tags\">Template tags</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#javascript-initialization\">JavaScript initialization</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#models\">Models</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#actions\">Actions</a></li>\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"#html-diff\">HTML Diff</a></li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../code-of-conduct/\">Contributor Covenant Code of Conduct</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://www.django-unicorn.com/docs/unicorn-latest.pdf\">PDF docs</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/adamghill/django-unicorn\">Code repo</a></li>\n<li class=\"toctree-l1\"><a class=\"reference external\" href=\"https://github.com/sponsors/adamghill\">Sponsor</a></li>\n</ul>\n<p class=\"caption\" role=\"heading\"><span class=\"caption-text\">API</span></p>\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../api/django_unicorn/\">django_unicorn</a></li>\n</ul>\n", "furo_hide_toc": false, "furo_pygments": {"light": {"background": "#f2f2f2", "foreground": "#1e1e1e"}, "dark": {"background": "#202020", "foreground": "#d0d0d0"}}}